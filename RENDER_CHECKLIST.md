# Render Deployment Checklist

## Pre-Deployment Checklist

### ✅ Repository Setup
- [ ] Code committed to GitHub/GitLab/Bitbucket
- [ ] All changes pushed to main branch
- [ ] `render.yaml` file exists in repository root
- [ ] No secrets committed to repository

### ✅ API Keys Ready
- [ ] Apple Sign-In credentials:
  - [ ] `APPLE_CLIENT_ID`
  - [ ] `APPLE_TEAM_ID`
  - [ ] `APPLE_KEY_ID`
  - [ ] `APPLE_PRIVATE_KEY`
- [ ] Google Sign-In credentials:
  - [ ] `GOOGLE_CLIENT_ID`
  - [ ] `GOOGLE_CLIENT_SECRET`
- [ ] AI API Keys:
  - [ ] `OPENAI_API_KEY`
  - [ ] `GEMINI_API_KEY`

### ✅ Account Setup
- [ ] Render account created
- [ ] Payment method added (for paid plans)
- [ ] Repository connected to Render

## Deployment Steps

### 1. Deploy via Blueprint (Recommended)
```bash
# 1. Go to https://dashboard.render.com
# 2. Click "New" → "Blueprint"
# 3. Connect your repository
# 4. Render detects render.yaml automatically
# 5. Click "Create Services"
```

### 2. Add Environment Variables
Once services are created:
```bash
# Go to your web service → Environment
# Add these variables:
APPLE_CLIENT_ID=your.app.bundle.id
APPLE_TEAM_ID=YOUR_TEAM_ID
APPLE_KEY_ID=YOUR_KEY_ID
APPLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_KEY\n-----END PRIVATE KEY-----"
GOOGLE_CLIENT_ID=your-client-id.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_secret
OPENAI_API_KEY=sk-your_openai_key
GEMINI_API_KEY=your_gemini_key
```

### 3. Monitor Deployment
- [ ] Build logs show successful completion
- [ ] Database migration runs successfully
- [ ] Health check passes
- [ ] Service shows as "Live"

## Post-Deployment Verification

### ✅ Basic Functionality
- [ ] API Documentation accessible: `https://your-app.onrender.com/api/docs`
- [ ] Health endpoint responds: `https://your-app.onrender.com/api/docs`
- [ ] Database connection successful

### ✅ Authentication Testing
- [ ] Apple Sign-In endpoint available
- [ ] Google Sign-In endpoint available
- [ ] JWT token generation works

### ✅ Performance Check
- [ ] Response times acceptable
- [ ] No memory/CPU alerts
- [ ] Logs show no errors

## Useful URLs
- **Render Dashboard**: https://dashboard.render.com
- **Your Web Service**: https://dashboard.render.com/web/{service-id}
- **Your Database**: https://dashboard.render.com/postgres/{db-id}
- **Application URL**: https://dysh-backend.onrender.com
- **API Docs**: https://dysh-backend.onrender.com/api/docs

## Common Issues & Solutions

### Build Fails
```bash
# Check build logs in Render dashboard
# Common fixes:
# 1. Ensure yarn.lock is committed
# 2. Check Node.js version compatibility
# 3. Verify all dependencies are in package.json
```

### Database Connection Error
```bash
# Verify DATABASE_URL is set correctly
# Should be auto-generated by Render
# Format: postgresql://user:password@host:port/database
```

### Environment Variables Missing
```bash
# Double-check all API keys are added
# Go to: Web Service → Environment → Add Environment Variable
```

### Migration Fails
```bash
# Access web service shell:
# Dashboard → Your Service → Shell
# Run manually: npx prisma migrate deploy
```

## Cost Estimation
- **Free Tier**: $0/month (limited hours, sleeps after inactivity)
- **Starter**: $14/month ($7 web service + $7 database)
- **Production**: $45/month ($25 web service + $20 database)

## Next Steps After Deployment
1. Set up custom domain (if needed)
2. Configure monitoring alerts
3. Set up automated backups
4. Plan scaling strategy
5. Monitor costs and usage 